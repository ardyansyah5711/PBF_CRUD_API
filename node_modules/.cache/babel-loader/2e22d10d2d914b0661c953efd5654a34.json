{"ast":null,"code":"var _jsxFileName = \"D:\\\\kuliah\\\\Semester 6\\\\Pemrograman Berbasis Framework\\\\Minggu 12\\\\minggu12\\\\src\\\\container\\\\BlogPost\\\\BlogPost.jsx\";\nimport React, { Component } from \"react\";\nimport './BlogPost.css';\nimport Post from \"./Post\";\n/*import API from '../../services';*/\n\nimport firebase from \"firebase\";\nimport firebaseConfig from '../../firebase/config';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass BlogPost extends Component {\n  constructor(props) {\n    super(props);\n\n    this.ambilDataDariServerAPI = () => {\n      let ref = firebase.database().ref(\"/\");\n      ref.on(\"value\", snapshot => {\n        const state = snapshot.val();\n        this.setState(state);\n      });\n    };\n\n    this.simpanDataKeServerAPI = () => {\n      firebase.database().ref(\"/\").set(this.state);\n    };\n\n    this.handleHapusArtikel = idArtikel => {\n      const {\n        listArtikel\n      } = this.state;\n      const newState = listArtikel.filter(data => {\n        return data.uid !== idArtikel;\n      });\n      this.setState({\n        listArtikel: newState\n      });\n    };\n\n    this.handleTombolSimpan = () => {\n      let title = this.refs.judulArtikel.value;\n      let body = this.refs.isiArtikel.value;\n      let uid = this.refs.uid.value;\n\n      if (uid && title && body) {\n        const {\n          listArtikel\n        } = this.state;\n        const indeksArtikel = listArtikel.findIndex(data => {\n          return data.uid === uid;\n        });\n        listArtikel[indeksArtikel].title = title;\n        listArtikel[indeksArtikel].body = body;\n        this.setState({\n          listArtikel\n        });\n      } else if (title && body) {\n        const uid = new Date().getTime().toString();\n        const {\n          listArtikel\n        } = this.state;\n        listArtikel.push({\n          uid,\n          title,\n          body\n        });\n        this.setState({\n          listArtikel\n        });\n      }\n\n      this.refs.judulArtikel.value = \"\";\n      this.refs.isiArtikel.value = \"\";\n      this.refs.uid.value = \"\";\n    };\n\n    if (!firebase.apps.length) {\n      firebase.initializeApp(firebaseConfig);\n    } else {\n      firebase.app(); // if already initialized, use that one\n    }\n\n    this.state = {\n      listArtikel: []\n    };\n  }\n\n  componentDidMount() {\n    //komponen untuk mengecek ketika komponen telah di-mount-ing, maka panggil API\n    this.ambilDataDariServerAPI();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState !== this.state) {\n      this.simpanDataKeServerAPI();\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"post-artikel\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form pb-2 border-bottom\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group row\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"title\",\n            className: \"col-sm-2 col-form-label\",\n            children: \"Judul\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-sm-10\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              className: \"form-control\",\n              id: \"title\",\n              name: \"title\",\n              ref: \"judulArtikel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group row\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"body\",\n            className: \"col-sm-2 col-form-label\",\n            children: \"Isi\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-sm-10\",\n            children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n              className: \"form-control\",\n              id: \"body\",\n              name: \"body\",\n              rows: \"3\",\n              ref: \"isiArtikel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"hidden\",\n          name: \"uid\",\n          ref: \"uid\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-primary\",\n          onClick: this.handleTombolSimpan,\n          children: \"Simpan\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Daftar Artikel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }, this), this.state.listArtikel.map(artikel => {\n        // looping dan masukan untuk setiap data yang ada di listArtikel ke variabel artikel\n        return /*#__PURE__*/_jsxDEV(Post, {\n          judul: artikel.title,\n          isi: artikel.body,\n          idArtikel: artikel.uid,\n          hapusArtikel: this.handleHapusArtikel\n        }, artikel.uid, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 32\n        }, this); // mappingkan data json dari API sesuai kategorinya\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default BlogPost;","map":{"version":3,"sources":["D:/kuliah/Semester 6/Pemrograman Berbasis Framework/Minggu 12/minggu12/src/container/BlogPost/BlogPost.jsx"],"names":["React","Component","Post","firebase","firebaseConfig","BlogPost","constructor","props","ambilDataDariServerAPI","ref","database","on","snapshot","state","val","setState","simpanDataKeServerAPI","set","handleHapusArtikel","idArtikel","listArtikel","newState","filter","data","uid","handleTombolSimpan","title","refs","judulArtikel","value","body","isiArtikel","indeksArtikel","findIndex","Date","getTime","toString","push","apps","length","initializeApp","app","componentDidMount","componentDidUpdate","prevProps","prevState","render","map","artikel"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport './BlogPost.css';\nimport Post from \"./Post\";\n/*import API from '../../services';*/\nimport firebase from \"firebase\";\nimport firebaseConfig from '../../firebase/config';\n\nclass BlogPost extends Component {\n    \n    constructor(props){\n        super(props);\n        if (!firebase.apps.length) {\n            firebase.initializeApp(firebaseConfig);\n         }else {\n            firebase.app(); // if already initialized, use that one\n         }\n\n        this.state = {\n            listArtikel: [],\n        };\n    }\n\n    ambilDataDariServerAPI = () => {\n        let ref = firebase.database().ref(\"/\");\n        ref.on(\"value\", snapshot => {\n            const state = snapshot.val();\n            this.setState(state);\n        });\n    }\n\n    simpanDataKeServerAPI = () => {\n        firebase.database()\n            .ref(\"/\")\n            .set(this.state);\n    }\n\n    componentDidMount() {   //komponen untuk mengecek ketika komponen telah di-mount-ing, maka panggil API\n        this.ambilDataDariServerAPI();\n    }\n\n    componentDidUpdate(prevProps , prevState){\n        if(prevState !== this.state){\n            this.simpanDataKeServerAPI();\n        }\n    }\n\n    handleHapusArtikel = (idArtikel) => {\n         const {listArtikel} = this.state;\n         const newState = listArtikel.filter(data => {\n             return data.uid !== idArtikel;\n         });\n         this.setState({listArtikel: newState});\n    }\n\n    handleTombolSimpan = () => {\n        let title = this.refs.judulArtikel.value;\n        let body = this.refs.isiArtikel.value;\n        let uid = this.refs.uid.value;\n\n        if (uid && title && body){\n            const {listArtikel} = this.state;\n            const indeksArtikel = listArtikel.findIndex(data => {\n                return data.uid === uid;\n            });\n            listArtikel[indeksArtikel].title = title;\n            listArtikel[indeksArtikel].body = body;\n            this.setState({listArtikel});\n        } else if (title && body) {\n            const uid = new Date().getTime().toString();\n            const {listArtikel} = this.state;\n            listArtikel.push({uid, title,body});\n            this.setState({listArtikel});\n        }\n        \n        this.refs.judulArtikel.value= \"\";\n        this.refs.isiArtikel.value = \"\";\n        this.refs.uid.value = \"\";\n    }\n\n    render() {\n        return (\n            <div className=\"post-artikel\">\n                <div className=\"form pb-2 border-bottom\">\n                    <div className=\"form-group row\">\n                        <label htmlFor=\"title\" className=\"col-sm-2 col-form-label\">Judul</label>\n                        <div className=\"col-sm-10\">\n                            <input type=\"text\" className=\"form-control\" id=\"title\" name=\"title\" ref=\"judulArtikel\" />\n                        </div>\n                    </div>\n                    <div className=\"form-group row\">\n                        <label htmlFor=\"body\" className=\"col-sm-2 col-form-label\">Isi</label>\n                        <div className=\"col-sm-10\">\n                            <textarea className=\"form-control\" id=\"body\" name=\"body\" rows=\"3\" ref=\"isiArtikel\"></textarea>\n                        </div>\n                    </div>\n                    <input type=\"hidden\" name=\"uid\" ref=\"uid\" />\n                    <button type=\"submit\" className=\"btn btn-primary\" onClick={this.handleTombolSimpan}>Simpan</button>\n                </div>\n                <h2>Daftar Artikel</h2>\n                {\n                    this.state.listArtikel.map(artikel => {     // looping dan masukan untuk setiap data yang ada di listArtikel ke variabel artikel\n                        return <Post key={artikel.uid} judul={artikel.title} isi={artikel.body} \n                                    idArtikel={artikel.uid} hapusArtikel={this.handleHapusArtikel} /> // mappingkan data json dari API sesuai kategorinya\n                    })\n                }\n            </div>\n        )\n    }\n}\n\nexport default BlogPost;"]},"metadata":{},"sourceType":"module"}